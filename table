-- Table: public.sdp_sku_component_mapping_details_auditlog

-- DROP TABLE IF EXISTS public.sdp_sku_component_mapping_details_auditlog;

CREATE TABLE IF NOT EXISTS public.sdp_sku_component_mapping_details_auditlog
(
    id integer NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    cm_code character varying(50) COLLATE pg_catalog."default" NOT NULL,
    sku_code character varying(250) COLLATE pg_catalog."default" NOT NULL,
    component_code character varying(50) COLLATE pg_catalog."default" NOT NULL,
    version integer NOT NULL,
    component_packaging_type_id character varying(50) COLLATE pg_catalog."default" NOT NULL,
    period_id integer NOT NULL,
    component_valid_from timestamp without time zone NOT NULL,
    component_valid_to timestamp without time zone NOT NULL,
    created_by character varying(50) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    is_active boolean DEFAULT true,
    CONSTRAINT sdp_sku_component_mapping_details_auditlog_pkey PRIMARY KEY (cm_code, sku_code, component_code, version, component_packaging_type_id, period_id, component_valid_from, component_valid_to),
    CONSTRAINT fk_summary_period FOREIGN KEY (period_id)
        REFERENCES public.sdp_period (id) MATCH SIMPLE
        ON UPDATE CASCADE
        ON DELETE RESTRICT,
    CONSTRAINT ssdp_sku_component_mapping_details_auditlog_version_check CHECK (version > 0)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.sdp_sku_component_mapping_details_auditlog
    OWNER to sdptl_user;
